STALKER Icon Editor (SIE)


Версия 0.6.2
Новая фишка: можно при вставке масштабировать фрагмент произвольным образом.

Выбираете способ копирования "Масштабировать". Войдя в режим вставки можно управлять масштабом или
требуемыми размерами с помощью панели инструментов, которая находится рядом.
Фишка сделана на скорую руку, поэтому есть некоторые недочёты:
1. Для фиксации введённого значения надо нажать Enter.
2. Пока не нажали Enter не уводите курсор за пределы поля ввода, иначе значение собъётся на дефолтовое.
3. Для собственно масштабирования надо нажать кнопку с буквой U (Update) на той же панели
Есть некритичный баг. После использования масштабирования уже имеющаяся в буфере картинка будет вставляться с неправильным 
масштабом. Так что надо обязательно скопировать фрагмент заново. Позже исправлю.


-------------------------------------------------------------------------------------
Важно! Для работы программы может потребоваться отдельная установка RunTime библиотек (a.k.a Microsoft Visual C++ Redistributable)
для версий 0.5.0 и ниже: Microsoft Visual C++ 2005 SP1 Redistributable Package (x86)
для версий 0.6.0 и 0.6.1: Microsoft Visual C++ 2008 SP1 Redistributable Package (x86)

SIE - это утилита для просмотра и редактирования иконок инвентаря для S.T.A.L.K.E.R Shadow of Chernobyl и Clear Sky.

Версия 0.6.1 (27.06.2009)
Основные возможности:
1. Открывает файлы текстур DDS следующих форматов:
пакованные DXT1/3/5 и непакованные ABGR и ARGB, а также файлы PNG.
Ограничения на свойства поддерживаемых текстур:
а) поддерживаются только однослойные текстуры, т.е. текстуры с числом mipmap уровней равным одному. Это вполне естественное ограничение, поскольку текстуры для худов, а также все текстуры для оформления интерфейса, включая файлы с иконками всех видов и элементами окошек не требуют дополнительных mipmap-уровней, поскольку отображаются в любом случае в полный размер, и дополнительные слои только будут занимать память. Что такое эти уровни и в каком случае нужны читайте здесь. Поскольку, однако, реально встречались файлы иконок с активированными mipmap уровнями, то имеется возможность открыть такой файл. Редактироваться и сохраняться будет при этом только основной (нулевой) слой. При этом будет дважды (при открытии и при сохранении) выдано соответствующее предупреждение.
б) поддерживаются только полноцветные текстуры (по 8 бит на каждый цвет и канал прозрачности).
Иные открыть будет невозможно.
2. Программа пытается по возможности сохранить качество пакованных текстур. Для этого при сохранении сохраняются только изменённые блоки. При увеличении/уменьшении текстуры статус нетронутых блоков сохраняется. При экспорте (в том числе и в том же формате) всё всегда сохраняется с полной перепаковкой.
3. "Знает" несколько стандартных файлов с иконками и умеет открывать их из каталога установки игры (ТЧ и ЧН).
4. Есть режим просмотра канала прозрачности.
5. Показывает сетку. Есть предопределённый набор размеров: 1х1, 30х27, 32х32, 50х50, 83х47, 165х108. Можно установить свои шаги. Выделение привязано к сетке. В режиме 1х1 сетка не показывается, а выделение осуществляется попиксельно, т.е. фактически свободно. Видимость сетки и её внешний вид можно регулировать.
6. Позволяет выделить отдельную иконку (точнее, произвольную область из квадратов). Далее можно узнать её (области) координаты. Можно сразу получить сформированный текст с уже подставленными значениями.
7. Выделение можно скопировать и вставить в другое место в текущем файле или в другом. Таким образом можно копировать иконки из разных источников в свой файл или переставлять их местами.
8. Разные операции по редактированию: копирование фрагментов (иконок) в пределах одного и между разными файлами, очистка области. Полезно для интеграции разных модов. Разные дополнительные режимы вставки (зеркалирование, - поворот на 90, -90, 180 градусов, копирование с использованием прозрачности).
9. Команды Отменить/Вернуть вплоть до последнего сохранения.
10. Есть операции расширения/уменьшения текстуры в два раза по горизонтали или вертикали.
11. Есть экспорт текстуры во все из поддерживаемых форматов (DDS или png).
12. Умеет расчитывать координаты аддонов к оружию. Addon Calculator вызывается из меню Edit.
13. Цвета фона, сетки и выделения можно изменить из диалога с настройками. Меню Edit -> Settings.
14. Разные настройки внешнего вида и прочее. Всё сохраняется в файле настроек.
15. Новая экспериментальная фишка: парсинг всех файлов конфигурации на предмет поиска инвентарных предметов и отображение сетки, соответствующей иконкам этих предметов. При движении мыши подсвечивается, иконки из каких секции находятся под курсором. Сетку можно скрыть.

Иконы инвентаря в игре хранятся в файле 
\gamedata\textures\ui\ui_icon_equipment.dds
это  файл  однослойной  текстуры,  упакованной  методом DXT5 (по-сути,
обычный растровый файл). Иконки в нём выровнены по квадратам 50х50.
В  файлах  ltx в описании каждого предмета (который может показаться в
инвентаре) имеются такие строки:
inv_grid_width     = 3    ; это ширина иконки
inv_grid_height    = 1    ; и высота "в квадратах"
inv_grid_x         = 5    ; это координаты иконки,
inv_grid_y         = 11   ; измеренные опять же "в квадратах"

Для редактирования этого файла и предназначена программа.

Версия 0.3 Beta (23.09.2008)
Чего умеет:
1.  Открывает файлы текстур DDS с числом mipmap уровней равным одному,
упакованные  методом  DXT5.  Это  собственно  все  файлы  из  каталога
\gamedata\textures\ui\,  однако  данная  программа заточена именно под
файл ui_icon_equipment.dds.
2. В дополнение к скроллбарам для перемещения картинки можно использо-
вать среднюю кнопку мыши.
3.  Показывает  сетку  с  шагом  50х50.  Показывает  координаты мыши и
соответствующие им координаты квадрата.
4.  Позволяет  выделить отдельную иконку (точнее, произвольную область
из  квадратов).  Далее можно узнать её (области) координаты. Это может
понадобиться для заполнения вышеприведённых данных из файлов ltx. 
Можно  сразу получить сформированный текст с уже подставленными значе-
ниями. Меню Edit -> Get Selection Info.
5.  Выделение  можно  скопировать  и вставить в другое место в текущем
файле  или  в  другом. Таким образом можно копировать иконки из разных
источников в свой файл или переставлять их местами.
6. Можно указать способ копирования (переключается в меню Edit):
   - просто копировать
   - зеркалировать горизонтально или веритикально
   - поворачивать на 90, -90, 180 градусов
7.  Можно  расширить текстуру в два раза по горизонтали или вертикали.
Это на случай, если всё уже забито и вставлять больше некуда.
8. Можно сохранить текстуру в другом формате (png или bmp).
9. Умеет расчитывать координаты аддонов к оружию. 
Addon Calculator вызывается из меню Edit.

Изменения в 0.3 beta:
Основные изменения:
1. Добавил скроллбары (хотя по мне так мышой удобнее таскать).
2. Теперь область просмотра строго ограничена пространством картинки.
3. Добавил возможность некоторых манипуляций с картинкой при копировании: зеркалирования и повороты на 90 и 180. 
   Ни разу не верю, что это кому-то понадобится.
4. Исправил несколько багов, добавил некоторые предупреждения и сообщения.

Замечания:
1.   Программа   предназначена  для  решения  узкоспециальной  задачи,
редактирования  иконок.  Это не редактор текстур ни под каким соусом и
никогда им не станет.
2.  Буфера  обмена  нет.  При операции копирования просто запоминается
координаты  выделения  в картинке-источнике, а при вставке эта область
копируется   в   начало   выделенной   в   данный   момент  области  в
картинке-приёмнике.
3.  Закрытие  _любого_  из открытых файлов сбрасывает начатую операцию
копирования.
4. Программа находится в стадии тестирования. Некоторые предупреждения
при  работе  имеются,  однако  будьте  осторожны! Сохраняйте резервные
копии файлов.
